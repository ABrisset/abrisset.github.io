<!DOCTYPE html><html lang=fr><head><meta charset=utf-8 /><meta content="width=device-width,initial-scale=1" name=viewport /><title>Clustering de mots-clés : utilisation de l'algorithme K-means &bull; Antoine Brisset</title><meta content="Découvrez comment créer des clusters de mots-clés en utilisant l'algorithme K-means couplé à quelques lignes de Ruby !" name=description /><meta content="index,follow" name=robots /><meta content=R7aPiADkUTnBNzbTvsqutfN3_gewIxUFwJpKYyc-hBQ name=google-site-verification /><link href="/apple-touch-icon.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-57x57-precomposed.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-60x60-precomposed.png" rel=apple-touch-icon sizes=60x60 /><link href="/apple-touch-icon-72x72-precomposed.png" rel=apple-touch-icon sizes=72x72 /><link href="/apple-touch-icon-76x76-precomposed.png" rel=apple-touch-icon sizes=76x76 /><link href="/apple-touch-icon-114x114-precomposed.png" rel=apple-touch-icon sizes=114x114 /><link href="/apple-touch-icon-120x120-precomposed.png" rel=apple-touch-icon sizes=120x120 /><link href="/apple-touch-icon-144x144-precomposed.png" rel=apple-touch-icon sizes=144x144 /><link href="/apple-touch-icon-152x152-precomposed.png" rel=apple-touch-icon sizes=152x152 /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><meta content="#f5f5f5" name=msapplication-TileColor /><meta content="/mstile-144x144.png" name=msapplication-TileImage /><link href="/stylesheets/application.css" rel=stylesheet /><link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel=stylesheet /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel=stylesheet /><style>.header{background-image: url('/images/backgrounds/small/semantic.jpg');}
    @media screen and (min-width: 25em){.header{background-image: url('/images/backgrounds/medium/semantic.jpg');}}
    @media screen and (min-width: 50em){.header{background-image: url('/images/backgrounds/semantic.jpg');}}</style><script src="/javascripts/all.js"></script></head><body class="blog blog_clustering-ruby-k-means blog_clustering-ruby-k-means_index"> <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WW7MSH" height=0 width=0 style="display:none;visibility:hidden"></iframe></noscript> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
          })(window,document,'script','dataLayer','GTM-NKG6T7');</script> <div class=wrapper><nav role=navigation><div class=fat-nav><div class=fat-nav__wrapper><ul><li><a href="/">Accueil</a></li><li><a href="/blog/">Blog SEO</a></li><li><a href="/#contact">Contact</a></li></ul></div></div></nav></div><div role=main></div><div class=header><div class=wrapper><h1 class=header__title>Clustering de mots-clés : un exemple avec K-means & Ruby</h1><p class=header__category><i class="fa fa-tag"></i> <em>Sémantique</em></p></div></div><div class="section section__content--large"><div class=wrapper><article class=blog__article><p class=blog__breadcrumb><a href="/blog/">Blog SEO</a> / <a href="/blog/categories/semantique/">Sémantique</a></p><p class=blog__date>Publié le 2 Jun 2016</p><p class=blog__chapo>Le machine learning étant un des nouveaux sujets SEO du moment, j'ai récemment commencé à approfondir le sujet et à mettre les mains dans le cambouis, dans le cadre d'une problématique bien précise : la catégorisation de mots-clés.</p><p>En ce moment, ma veille et mes recherches portent sur la manière de clusteriser un ensemble de mots-clés. En effet, le problème, lorsqu&#39;on réalise une étude de mots-clés, ce n&#39;est pas de trouver les expressions, puisque de nombreux outils existent pour nous aider dans cette tâche (SEMrush, Keywordtool.io, etc.). Toute la difficulté consiste plutôt à les regrouper pour créer des ensembles cohérents, qui nous guideront soit dans la création de campagnes Adwords, soit dans l&#39;ébauche d&#39;une arborescence ou d&#39;un plan éditorial. En creusant un peu, je suis tombé sur l&#39;algorithme <em>K-means</em> (<em>K-moyennes</em> en français), qui constitue un bon début. Voyons comment l&#39;utiliser avec Ruby.</p> <h2>Qu&#39;est-ce que K-means ?</h2> <p>K-means est un algorithme de partitionnement de données qui repose sur <a href="https://fr.wikipedia.org/wiki/Apprentissage_non_supervis%C3%A9">un apprentissage non supervisé</a>.</p> <h3>1ère étape</h3> <p>A partir d&#39;un jeu de données qu&#39;on transforme en points, et d&#39;un nombre k de partitions défini au préalable, on calcule la distance entre chacun des points du dataset et chacun des k <em>centroids</em> choisis aléatoirement. Chacun des points est ensuite assigné au centroid le plus proche, ou, plus précisément, au centroid avec lequel <strong>la distance euclidienne est la plus faible</strong>. Bien entendu, la mesure de distance peut varier : similarité cosinus, indice de Jaccard, etc.</p> <h3>2ème étape</h3> <p>Suite à cela, deuxième passe, on calcule la moyenne des points appartenant à chaque centroid et on déplace le centroid en fonction de la moyenne obtenue. Puis on recommence la 1ère étape, et ainsi de suite de manière itérative jusqu&#39;à ce que les clusters soient stables.</p> <p>Pour bien comprendre, je vous conseille <a href="https://www.youtube.com/watch?v=_aWzGGNrcic">cette vidéo</a>.</p> <h2>Implémentation en Ruby</h2> <h3>1. Installez la gem &ldquo;kmeans-clusterer&rdquo;</h3> <p>Comme toujours en Ruby, il existe des gems qui vont nous faciliter le travail. Ici, nous utiliserons la gem <a href="https://github.com/gbuesing/kmeans-clusterer">KMeansClusterer</a>. Ajoutez-la à votre Gemfile, installez-la via Bundler et n&#39;oubliez pas de l&#39;inclure dans votre fichier.</p> <div class=highlight><pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">'kmeans-clusterer'</span>
</code></pre></div> <h3>2. Transformez votre set de mots-clés en vecteurs</h3> <p>Pour pouvoir utiliser nos données dans le programme, il va falloir d&#39;abord convertir nos mots-clés en vecteurs, stockés dans un array global. Prenons l&#39;exemple d&#39;un set réduit de mots-clés autour du SEO. On commence par stocker nos mots-clés dans un array.</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"consultant seo"</span><span class="p">,</span><span class="s2">"référencement naturel"</span><span class="p">,</span><span class="s2">"expert seo"</span><span class="p">,</span><span class="s2">"referencement naturel"</span><span class="p">,</span><span class="s2">"consultant referencement"</span><span class="p">,</span><span class="s2">"consultant référencement"</span><span class="p">,</span><span class="s2">"agence de référencement"</span><span class="p">,</span><span class="s2">"agence seo"</span><span class="p">,</span><span class="s2">"consultant en référencement"</span><span class="p">,</span><span class="s2">"expert referencement"</span><span class="p">,</span><span class="s2">"agence référencement"</span><span class="p">,</span><span class="s2">"consultant référencement naturel"</span><span class="p">,</span><span class="s2">"agence referencement"</span><span class="p">,</span><span class="s2">"consultant en referencement"</span><span class="p">,</span><span class="s2">"agence de referencement"</span><span class="p">,</span><span class="s2">"référencement seo"</span><span class="p">,</span><span class="s2">"experts referencement"</span><span class="p">,</span><span class="s2">"référenceur freelance"</span><span class="p">,</span><span class="s2">"consultant référencement internet"</span><span class="p">,</span><span class="s2">"expert référencement"</span><span class="p">,</span><span class="s2">"consultant referencement naturel"</span><span class="p">,</span><span class="s2">"consultant en référencement naturel"</span><span class="p">,</span><span class="s2">"conseil seo"</span><span class="p">,</span><span class="s2">"referenceur freelance"</span><span class="p">,</span><span class="s2">"spécialiste référencement naturel"</span><span class="p">,</span><span class="s2">"search engine optimization for dummies"</span><span class="p">,</span><span class="s2">"seo referencement"</span><span class="p">,</span><span class="s2">"consultant en referencement naturel"</span><span class="p">,</span><span class="s2">"devis referencement"</span><span class="p">,</span><span class="s2">"top seo company"</span><span class="p">,</span><span class="s2">"expert référencement naturel"</span><span class="p">]</span>
</code></pre></div> <p>Ensuite, on va transformer cet ensemble en un sac de mots (un corpus de mots en quelque sorte), en découpant sur l&#39;espace, puis en mettant tout &ldquo;à plat&rdquo; et en dédoublonnant.</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">words</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">k</span><span class="o">|</span>
  <span class="n">k</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>
<span class="k">end</span><span class="p">.</span><span class="nf">flatten</span><span class="p">.</span><span class="nf">uniq</span>
</code></pre></div> <p>Enfin, on va créer nos vecteurs en bouclant sur chaque mot-clé et en respectant une logique binaire : si le mot-clé contient le mot du corpus, on attribue 1, sinon on attribue 0. Ce qui donne :</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">vectors</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="n">words</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">w</span><span class="o">|</span>
    <span class="nb">p</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div> <h3>3. Partitionnez !</h3> <p>Le plus dur est fait ! Il faut désormais choisir un nombre k de centroids : ici on va prendre par exemple 5. En sortie, nous aurons donc <em>5 clusters</em>.</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">k</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div> <p>Puis on instancie la classe <code>KMeansClusterer</code>, en lui passant en paramètre le nombre de centroids, les vecteurs, les labels (mots-clés) et le nombre d&#39;itérations maximum. La méthode <code>run</code> permet de lancer le traitement des données.</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">kmeans</span> <span class="o">=</span> <span class="no">KMeansClusterer</span><span class="p">.</span><span class="nf">run</span> <span class="n">k</span><span class="p">,</span> <span class="n">vectors</span><span class="p">,</span> <span class="ss">labels: </span><span class="n">keywords</span><span class="p">,</span> <span class="ss">runs: </span><span class="mi">5</span>
</code></pre></div> <p>Il ne reste plus qu&#39;à afficher les données en console.</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">kmeans</span><span class="p">.</span><span class="nf">clusters</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">cluster</span><span class="o">|</span>
  <span class="nb">puts</span>  <span class="n">cluster</span><span class="p">.</span><span class="nf">id</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">+</span> <span class="s1">'. '</span> <span class="o">+</span>
        <span class="n">cluster</span><span class="p">.</span><span class="nf">points</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:label</span><span class="p">).</span><span class="nf">join</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\r\t</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div> <p>Voici les résultats :</p> <div class=highlight><pre class="highlight console"><code><span class="go">0. référencement seo, agence seo, agence référencement, expert référencement, seo referencement, referenceur freelance, référenceur freelance

1. consultant en référencement naturel, consultant référencement naturel, consultant en référencement, consultant référencement, référencement naturel, consultant référencement internet, spécialiste référencement naturel, expert référencement naturel

2. consultant en referencement, consultant referencement, consultant referencement naturel, consultant en referencement naturel, referencement naturel, expert referencement, experts referencement

3. agence de referencement, agence referencement, agence de référencement, devis referencement

4. consultant seo, expert seo, conseil seo
</span></code></pre></div> <h2>Analyse des résultats et amélioration</h2> <p>Comme on peut le voir, les résultats pourraient être meilleurs si, au préalable, on avait normalisé les données : suppression des stop words, suppression des accents. En faisant cela, on éviterait par exemple que &ldquo;consultant en référencement naturel&rdquo; soit dans un cluster différent de &ldquo;consultant en referencement naturel&rdquo;. Pour autant les résultats sont plutôt cohérents.</p> <p>Voilà pour cette première tentative de clustering. Certes, la méthode n&#39;est pas aussi efficace que je l&#39;aurais souhaité et présente l&#39;inconvénient de devoir connaître le nombre de clusters <em>a priori</em>, mais le gros avantage est qu&#39;elle est peu coûteuse en termes d&#39;implémentation et de performance ;)</p> <p>Et vous, utilisez-vous cette méthode ?</p> <div id=disqus_thread></div> <script>
//<![CDATA[
                  var disqus_shortname = 'blogantoinebrisset';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script> <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript> <a href='http://disqus.com' class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </article></div></div><footer class=footer><div role=content-info><ul class=footer__content><li class=footer__content__item><i class="fa fa-home"></i> Marquette-lez-Lille</li><li class=footer__content__item><i class="fa fa-phone"></i> 06 12 71 82 78</li><li class=footer__content__item><i class="fa fa-envelope"></i> <a href="#email-protection-pbagnpg@nagbvar-oevffrg.pbz">contact@antoine-brisset.com</a> </li></ul><ul class=footer__content--social><li class=footer__content__item--social><a href="https://twitter.com/abrisset"><i class='fa fa-twitter footer__icon'></i></a></li><li class=footer__content__item--social><a href="https://github.com/ABrisset"><i class='fa fa-github footer__icon'></i></a></li><li class=footer__content__item--social><a href="http://plus.google.com/112811217796192792405?rel=author"><i class='fa fa-google-plus footer__icon'></i></a></li></ul><div class=footer__copyright> &copy; 2019 - <a href="/">Antoine Brisset</a></div></div></footer><script type="text/javascript">!function(){try{var a,b,c,d,g=document.getElementsByTagName("a");for(c=0;g.length-c;c++)try{b=g[c].getAttribute("href"),b&&b.indexOf("#email-protection-")>-1&&b.length>19&&(a="",d=19+b.indexOf("#email-protection-"),b.length>d&&(a=b.substr(18).replace(/[a-zA-Z]/g,function(a){return String.fromCharCode(("Z">=a?90:122)>=(a=a.charCodeAt(0)+13)?a:a-26)})),g[c].setAttribute("href","mailto:"+a))}catch(h){}}catch(h){}}();</script>
</body></html>