<!DOCTYPE html><html lang=fr><head><meta charset=utf-8 /><meta content="width=device-width,initial-scale=1" name=viewport /><title>Trouver des mots-clés SEO avec R et Yooda Insight &bull; Antoine Brisset</title><meta content="Découvrez dans ce petit tutoriel comment identifier les mots-clés travaillés par vos concurrents avec le logiciel R et Yooda Singiht." name=description /><meta content="index,follow" name=robots /><meta content=R7aPiADkUTnBNzbTvsqutfN3_gewIxUFwJpKYyc-hBQ name=google-site-verification /><link href="/apple-touch-icon.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-57x57-precomposed.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-60x60-precomposed.png" rel=apple-touch-icon sizes=60x60 /><link href="/apple-touch-icon-72x72-precomposed.png" rel=apple-touch-icon sizes=72x72 /><link href="/apple-touch-icon-76x76-precomposed.png" rel=apple-touch-icon sizes=76x76 /><link href="/apple-touch-icon-114x114-precomposed.png" rel=apple-touch-icon sizes=114x114 /><link href="/apple-touch-icon-120x120-precomposed.png" rel=apple-touch-icon sizes=120x120 /><link href="/apple-touch-icon-144x144-precomposed.png" rel=apple-touch-icon sizes=144x144 /><link href="/apple-touch-icon-152x152-precomposed.png" rel=apple-touch-icon sizes=152x152 /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><meta content="#f5f5f5" name=msapplication-TileColor /><meta content="/mstile-144x144.png" name=msapplication-TileImage /><link href="/stylesheets/application.css" rel=stylesheet /><link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel=stylesheet /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel=stylesheet /><style>.header{background-image: url('/images/backgrounds/small/code.jpeg');}
    @media screen and (min-width: 25em){.header{background-image: url('/images/backgrounds/medium/code.jpeg');}}
    @media screen and (min-width: 50em){.header{background-image: url('/images/backgrounds/code.jpeg');}}</style><script src="/javascripts/all.js"></script></head><body class="blog blog_opportunites-mots-cles-r blog_opportunites-mots-cles-r_index"> <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WW7MSH" height=0 width=0 style="display:none;visibility:hidden"></iframe></noscript> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
          })(window,document,'script','dataLayer','GTM-NKG6T7');</script> <div class=wrapper><nav role=navigation><div class=fat-nav><div class=fat-nav__wrapper><ul><li><a href="/">Accueil</a></li><li><a href="/blog/">Blog SEO</a></li><li><a href="/#contact">Contact</a></li></ul></div></div></nav></div><div role=main></div><div class=header><div class=wrapper><h1 class=header__title>Identifier des opportunités de positionnement avec R et Yooda Insight</h1><p class=header__category><i class="fa fa-tag"></i> <em>Scripts SEO</em></p></div></div><div class="section section__content--large"><div class=wrapper><article class=blog__article><p class=blog__breadcrumb><a href="/blog/">Blog SEO</a> / <a href="/blog/categories/scripts-seo/">Scripts SEO</a></p><p class=blog__date>Publié le 4 Dec 2017</p><p class=blog__chapo>Rechercher des mots-clés est une tâche récurrente en SEO, qui nécessite souvent de manipuler de gros volumes de données. Cela peut vite devenir très chronophage si on n'automatise pas un minimum. Si j'avais jusqu'ici l'habitude d'utiliser MySQL pour effectuer des traitements sur des fichiers de mots-clés volumineux, je me tourne désormais de plus en en plus vers R.</p><p>Voici un exemple de script qui va me permettre de résoudre une problématique récurrente, notamment lorsqu&#39;on mène un audit concurrentiel : quels sont les mots-clés sur lesquels un ou plusieurs de mes concurrents sont présents dans les SERP, mais pas moi ? Pour cet exemple, j&#39;ai utilisé l&#39;outil Yooda Insight, mais un outil comme SEMrush aurait fait l&#39;affaire également.</p> <h2>Récupérer la liste des mots-clés sur lesquels se positionnent mes concurrents</h2> <p>Pour chaque site étudié, je fais un export CSV du rapport &ldquo;Expressions de recherche&rdquo; de Yooda Insight. Je fais la même chose pour mon site (ou celui de mon client), mais je renomme le fichier, par exemple en mon-site.csv, pour le distinguer des autres par la suite. Je place l&#39;ensemble fichiers dans le working directory utilisé avec R (ou R Studio, selon ce que vous préférez).</p> <h2>La librairie incontournable : dplyr</h2> <p>Pour ce script, j&#39;utilise la librairie <code>dplyr</code>, qui permet de réaliser des jointures, des déduplications, des tris et d&#39;autres oéprations du genre, un peu à la manière de SQL.</p> <div class=highlight><pre class="highlight r"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span></code></pre></div> <h2>Concaténer les fichiers des concurrents avec R</h2> <p>Je stocke tout d&#39;abord la liste des fichiers de mots-clés des concurrents. Ces fichiers ont comme point commun de commencer par &ldquo;Seo&rdquo; et de finir par &ldquo;.csv&rdquo;.</p> <div class=highlight><pre class="highlight r"><code><span class="n">files</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.files</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Seo.*\\.csv$"</span><span class="p">)</span><span class="w">
</span></code></pre></div> <p>Puis j&#39;ouvre chaque fichier pour en extraire le contenu. Pour cela, j&#39;utilise la fonction <code>lapply</code>, en bouclant sur chaque élément de la liste. L&#39;objectif étant de retourner une nouvelle liste, mais en ayant extrait le contenu des fichiers CSV.</p> <div class=highlight><pre class="highlight r"><code><span class="n">competitors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">files</span><span class="p">,</span><span class="k">function</span><span class="p">(</span><span class="n">i</span><span class="p">){</span><span class="w">
  </span><span class="n">read.csv</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">check.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span><span class="w"> </span><span class="n">quote</span><span class="o">=</span><span class="s2">"\""</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div> <p>Je concatène les données pour avoir un data frame contenant l&#39;ensemble des éléments.</p> <div class=highlight><pre class="highlight r"><code><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind</span><span class="p">,</span><span class="w"> </span><span class="n">competitors</span><span class="p">)</span><span class="w">
</span></code></pre></div> <p>Je personnalise le nom des colonnes du data frame, via la fonction <code>names</code>.</p> <div class=highlight><pre class="highlight r"><code><span class="nf">names</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Keyword"</span><span class="p">,</span><span class="s2">"Trafic"</span><span class="p">,</span><span class="s2">"Rank"</span><span class="p">,</span><span class="s2">"Page"</span><span class="p">,</span><span class="s2">"Volume"</span><span class="p">,</span><span class="s2">"Concurrence"</span><span class="p">,</span><span class="s2">"CPC"</span><span class="p">,</span><span class="s2">"Results"</span><span class="p">)</span><span class="w">
</span></code></pre></div> <h2>Créer un data frame à partir de ses propres données</h2> <p>Pour le fichier de mots-clés de mon site, je procède de la même façon : création d&#39;un data frame et renommage des colonnes.</p> <div class=highlight><pre class="highlight r"><code><span class="n">my_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"mon-site.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">check.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span><span class="w"> </span><span class="n">quote</span><span class="o">=</span><span class="s2">"\""</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Keyword"</span><span class="p">,</span><span class="s2">"Trafic"</span><span class="p">,</span><span class="s2">"Rank"</span><span class="p">,</span><span class="s2">"Page"</span><span class="p">,</span><span class="s2">"Volume"</span><span class="p">,</span><span class="s2">"Concurrence"</span><span class="p">,</span><span class="s2">"CPC"</span><span class="p">,</span><span class="s2">"Results"</span><span class="p">)</span><span class="w">
</span></code></pre></div> <h2>Filtrer le data frame</h2> <p>Ensuite, je réduis le data frame aux deux colonnes qui m&#39;intéressent : mot-clé et volume de recherche, soit la colonne 1 et la colonne 5.</p> <div class=highlight><pre class="highlight r"><code><span class="n">competitor_keywords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="p">[,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">)]</span><span class="w">
</span></code></pre></div> <p>Je déduplique (via la fonction <code>unique</code> de dplyr).</p> <div class=highlight><pre class="highlight r"><code><span class="n">competitor_keywords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">competitor_keywords</span><span class="p">)</span><span class="w">
</span></code></pre></div> <p>Puis, à l&#39;aide de <code>filter</code>, je sélectionne dans le data frame les lignes pour lesquelles la valeur du champ Keyword ne correspond pas à l&#39;expression régulière contenue dans <code>!grepl</code>. En gros, j&#39;élimine les mots-clés marque pour ne pas fausser l&#39;analyse.</p> <div class=highlight><pre class="highlight r"><code><span class="n">competitor_keywords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">competitor_keywords</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">grepl</span><span class="p">(</span><span class="s2">".*(mot-clé-marque-1|mot-clé-marque-2).*"</span><span class="p">,</span><span class="n">competitor_keywords</span><span class="o">$</span><span class="n">Keyword</span><span class="p">))</span><span class="w">
</span></code></pre></div> <p>Je fais la même chose avec mon data frame.</p> <div class=highlight><pre class="highlight r"><code><span class="n">my_keywords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">my_data</span><span class="p">[,</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">)]</span><span class="w">
</span><span class="n">my_keywords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">my_keywords</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">grepl</span><span class="p">(</span><span class="s2">"ma marque"</span><span class="p">,</span><span class="n">my_keywords</span><span class="o">$</span><span class="n">Keyword</span><span class="p">))</span><span class="w">
</span></code></pre></div> <h2>Dernière étape : l&#39;anti join</h2> <p>Il ne reste plus qu&#39;à réaliser un anti join, c&#39;est-à-dire sélectionner dans le data frame des concurrents les mots-clés qui n&#39;ont aucun &ldquo;match&rdquo; dans mon data frame. Un peu comme un left outer join en SQL, avec un select sur les valeurs null.</p> <div class=highlight><pre class="highlight r"><code><span class="n">opportunities</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">anti_join</span><span class="p">(</span><span class="n">competitor_keywords</span><span class="p">,</span><span class="w"> </span><span class="n">my_keywords</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s2">"Keyword"</span><span class="p">)</span><span class="w">
</span></code></pre></div> <p>Je peux enfin, en utilisant <code>arrange</code>, trier les mots-clés par ordre de volume de recherche afin d&#39;afficher les opportunités de positionnement prioritaires, puis enregistrer le tout dans un CSV.</p> <div class=highlight><pre class="highlight r"><code><span class="n">opportunities</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">arrange</span><span class="p">(</span><span class="n">opportunities</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">(</span><span class="n">Volume</span><span class="p">))</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">opportunities</span><span class="p">,</span><span class="s2">"opportunities.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div> <p>Voici ce que l&#39;on obtient, par exemple ici avec un client dans le domaine du tricot.</p> <div class=highlight><pre class="highlight r"><code><span class="n">head</span><span class="p">(</span><span class="n">opportunities</span><span class="p">)</span><span class="w">
             </span><span class="n">Keyword</span><span class="w"> </span><span class="n">Volume</span><span class="w">
</span><span class="m">1</span><span class="w">             </span><span class="n">alaska</span><span class="w">  </span><span class="m">33100</span><span class="w">
</span><span class="m">2</span><span class="w">           </span><span class="n">broderie</span><span class="w">   </span><span class="m">9900</span><span class="w">
</span><span class="m">3</span><span class="w">              </span><span class="n">teddy</span><span class="w">   </span><span class="m">6600</span><span class="w">
</span><span class="m">4</span><span class="w">               </span><span class="n">fils</span><span class="w">   </span><span class="m">5400</span><span class="w">
</span><span class="m">5</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="err">à</span><span class="w"> </span><span class="n">tricoter</span><span class="w">   </span><span class="m">3600</span><span class="w">
</span><span class="m">6</span><span class="w">        </span><span class="n">blog</span><span class="w"> </span><span class="n">tricot</span><span class="w">   </span><span class="m">3600</span><span class="w">
</span></code></pre></div> <p>Et voilà, encore un bel exemple de traitement SEO avec R :)</p> <div id=disqus_thread></div> <script>
//<![CDATA[
                  var disqus_shortname = 'blogantoinebrisset';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script> <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript> <a href='http://disqus.com' class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </article></div></div><footer class=footer><div role=content-info><ul class=footer__content><li class=footer__content__item><i class="fa fa-home"></i> Marquette-lez-Lille</li><li class=footer__content__item><i class="fa fa-phone"></i> 06 12 71 82 78</li><li class=footer__content__item><i class="fa fa-envelope"></i> <a href="#email-protection-pbagnpg@nagbvar-oevffrg.pbz">contact@antoine-brisset.com</a> </li></ul><ul class=footer__content--social><li class=footer__content__item--social><a href="https://twitter.com/abrisset"><i class='fa fa-twitter footer__icon'></i></a></li><li class=footer__content__item--social><a href="https://github.com/ABrisset"><i class='fa fa-github footer__icon'></i></a></li><li class=footer__content__item--social><a href="http://plus.google.com/112811217796192792405?rel=author"><i class='fa fa-google-plus footer__icon'></i></a></li></ul><div class=footer__copyright> &copy; 2019 - <a href="/">Antoine Brisset</a></div></div></footer><script type="text/javascript">!function(){try{var a,b,c,d,g=document.getElementsByTagName("a");for(c=0;g.length-c;c++)try{b=g[c].getAttribute("href"),b&&b.indexOf("#email-protection-")>-1&&b.length>19&&(a="",d=19+b.indexOf("#email-protection-"),b.length>d&&(a=b.substr(18).replace(/[a-zA-Z]/g,function(a){return String.fromCharCode(("Z">=a?90:122)>=(a=a.charCodeAt(0)+13)?a:a-26)})),g[c].setAttribute("href","mailto:"+a))}catch(h){}}catch(h){}}();</script>
</body></html>